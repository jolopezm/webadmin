<aside class="sidebar" aria-label="Navegación principal">
    <div class="logo">
        <div class="mark">PM</div>
        <div>
            <div style="font-weight: 700; font-size: 16px">Pymap</div>
            <div style="font-size: 11px; color: var(--muted)">
                Panel Administrativo
            </div>
        </div>
    </div>

    <nav class="nav" aria-label="Secciones">
        <a href="index.html" data-page="index" class="link-index">Datos</a>
        <a href="pages/pedidos.html" data-page="pedidos" class="link-pages"
            >Reportes</a
        >
        <a href="pages/vision.html" data-page="vision" class="link-pages"
            >Visión General</a
        >
    </nav>

    <div
        style="
            margin-top: auto;
            padding: 12px;
            border-top: 1px solid var(--light-gray);
        "
    >
        <div
            class="profile"
            style="
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 12px;
            "
        >
            <div
                class="avatar"
                id="sidebar-user-avatar"
                style="width: 36px; height: 36px; font-size: 14px"
            >
                AU
            </div>
            <div style="flex: 1; min-width: 0">
                <div
                    id="sidebar-user-name"
                    style="
                        font-weight: 600;
                        font-size: 13px;
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                    "
                >
                    Admin Usuario
                </div>
                <div
                    id="sidebar-user-role"
                    style="font-size: 11px; color: var(--muted)"
                >
                    Administrador
                </div>
            </div>
        </div>

        <button
            id="sidebar-logout-btn"
            class="btn ghost"
            style="
                width: 100%;
                padding: 8px;
                font-size: 13px;
                justify-content: center;
            "
        >
            Cerrar Sesión
        </button>

        <div
            style="
                margin-top: 12px;
                padding-top: 12px;
                border-top: 1px solid var(--light-gray);
                color: var(--muted);
                font-size: 11px;
                text-align: center;
            "
        >
            Versión 1.0.0
        </div>
    </div>
</aside>

<script>
    // Auto-activar el link correspondiente a la página actual
    ;(function () {
        const currentPage =
            window.location.pathname.split('/').pop() || 'index.html'
        const links = document.querySelectorAll('.sidebar .nav a')

        console.log('Página actual:', currentPage)

        links.forEach(link => {
            const page = link.getAttribute('data-page') + '.html'
            console.log(
                'Comparando:',
                page,
                '===',
                currentPage,
                '?',
                page === currentPage
            )
            if (page === currentPage) {
                link.classList.add('active')
            }
        })
    })()
</script>
